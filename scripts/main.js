let selections = [
    {
        title: 'Лучшие бизнес-книги',
        description: 'Деловая и научно-популярная литература издательств «Манн, Иванов и Фербер», «Альпина Паблишер», «Олимп-Бизнес» и других',
        books: [
            {
                cover: '../assets/images/cover1.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover2.jpg',
                rating: 5,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover3.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover4.jpg',
                rating: 3,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover5.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover6.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover7.jpg',
                rating: 3,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover8.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
        ],
    },
    {
        title: 'Лучшие бизнес-книги',
        description: 'Деловая и научно-популярная литература издательств «Манн, Иванов и Фербер», «Альпина Паблишер», «Олимп-Бизнес» и других',
        books: [
            {
                cover: '../assets/images/cover1.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover2.jpg',
                rating: 5,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover3.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover4.jpg',
                rating: 3,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover5.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover6.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover7.jpg',
                rating: 3,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover8.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
        ],
    },
    {
        title: 'Лучшие бизнес-книги',
        description: 'Деловая и научно-популярная литература издательств «Манн, Иванов и Фербер», «Альпина Паблишер», «Олимп-Бизнес» и других',
        books: [
            {
                cover: '../assets/images/cover1.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover2.jpg',
                rating: 5,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover3.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover4.jpg',
                rating: 3,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover5.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover6.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover7.jpg',
                rating: 3,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
            {
                cover: '../assets/images/cover8.jpg',
                rating: 4,
                title: 'Переговоры за минуту. Экспресс-курс делового общения',
                author: 'Эдуард Трымбовецкий',
                to: '../pages/book.html'
            },
        ],
    },
];

let selectionGroup = document.querySelector(".selection-group");
selectionGroup.innerHTML = '';
for (let selection of selections) {
    let books = '';
    for (let book of selection.books) {
        books += `
            <li class="book">
                <a href=${book.to}><img class="book-cover" src="${book.cover}" alt=""></a>
                <div class="book-rating">${"⭐".repeat(book.rating)}</div>
                <a href=${book.to}><h5 class="book-title">${truncate(book.title, 32)}</h5></a>
                <p class="book-author">${truncate(book.author, 12)}</p>
            </li>`
    }

    selectionGroup.innerHTML += `
        <div class="selection">
            <h3 class="selection-title">${selection.title}</h3>
            <p class="selction-description">${selection.description}</p>
            <ul class="books">
                ${books}
            </ul>
        </div>`;
}

function truncate(str, max) {
    if (str.length < max) {
        return str;
    } else {
        return str.substring(0, max) + '...';
    }
}

const slider = document.querySelector('.slides');
const slides = document.querySelectorAll('.slide');
const slideLength = slides[0].clientWidth;
let active = 0;

const controls = document.querySelectorAll('.slide-button');
controls[active].classList.add('active');
for (let i = 0; i < slides.length; i++) {
    controls[i].onclick = () => {
        slider.scrollLeft += (i - active) * slideLength;
        active = i;
        for (let j = 0; j < controls.length; j++) {
            if (j == active) {
                controls[j].classList.add('active');
            } else {
                controls[j].classList.remove('active');
            }
        }
        //slides[i].scrollIntoView({ behavior: 'smooth' });
    }
}